<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Babe Sculpting</title>

<style>
  body{
    font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",Helvetica,Arial,sans-serif;
    background:#f4f4f4;
    padding:20px;
    color:#222;
    display:flex;
    flex-wrap:wrap;
    gap:20px;
    justify-content:space-around;
  }

  .thumbnail-container{
    position:relative;
    flex:1 1 calc(33% - 20px);
    max-width:300px;
    aspect-ratio:1;
    border-radius:10px;
    overflow:hidden;
    cursor:pointer;
    box-shadow:0 4px 6px rgba(0,0,0,.1);
    transition:transform .2s, box-shadow .2s;
    background:#fff;
  }
  .thumbnail-container:hover{
    transform:scale(1.06);
    box-shadow:0 6px 10px rgba(0,0,0,.2);
  }
  .thumbnail-container img{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
  }
  .label{
    position:absolute;
    left:0; right:0; bottom:0;
    background:rgba(0,0,0,.6);
    color:#fff;
    text-align:center;
    padding:10px 8px;
    font-size:18px;
    font-weight:800;
    letter-spacing:.5px;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }

  .controls{
    width:100%;
    display:flex;
    justify-content:center;
    gap:16px;
    margin-top:10px;
  }
  .controls button{
    padding:10px 18px;
    font-size:16px;
    font-weight:700;
    border-radius:10px;
    border:1px solid #ddd;
    background:#fff;
    cursor:pointer;
    box-shadow:0 6px 18px rgba(0,0,0,.06);
  }

  .overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.55);
    z-index:999;
    display:none;
  }

  #panel{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    z-index:1000;
    width:min(460px, 92vw);
    max-height:86vh;
    overflow-y:auto;
    padding:16px;
    border-radius:14px;
    background:transparent;
  }

  .exercise-card{
    background:#fff;
    border-radius:14px;
    box-shadow:0 20px 50px rgba(0,0,0,.25);
    padding:16px 16px 14px;
    margin-bottom:18px;
  }
  .exercise-card img{
    width:180px;
    height:180px;
    object-fit:cover;
    border-radius:10px;
    display:block;
    margin:0 auto 10px;
  }
  .exercise-title{
    text-align:center;
    font-size:18px;
    font-weight:800;
    letter-spacing:.3px;
    margin:0 0 10px;
  }

  /* --- Original Minimal Plate Charts look --- */
  .chart-wrapper{
    display:inline-block;
    width:fit-content;
    background:#fff;
    border-radius:10px;
    box-shadow:0 6px 20px rgba(0,0,0,0.06);
    border:1px solid #e6e6e6;
  }
  .chart-wrapper + .chart-wrapper{ display:block; margin-top:12px; }

  .chart{
    display:grid;
    grid-template-columns:repeat(5,72px);
    grid-auto-rows:38px;
    gap:1px;
    background:#f0f0f0;
  }
  .cell{
    background:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:13px;
    font-weight:500;
    padding:2px;
    user-select:none;
  }
  .chart-label{ font-weight:700; letter-spacing:.3px; color:#444; }

  .editable{
    background:#fafafa;
    border-bottom:1px solid #ddd;
    cursor:text;
    font-weight:600;
  }
  .editable:focus{
    background:#fff;
    border-bottom-color:#999;
    outline:none;
  }

  .slider-container{
    width:100%;
    text-align:center;
    font-size:11px;
    color:#666;
  }
  input[type="range"]{
    width:100%;
    height:6px;
    margin-top:3px;
    appearance:none;
    background:#ddd;
    border-radius:3px;
    outline:none;
  }
  input[type="range"]::-webkit-slider-thumb{
    appearance:none;
    width:14px;
    height:14px;
    background:#222;
    border-radius:50%;
    cursor:pointer;
  }

  .plate{ font-weight:600; color:#444; transition:background .15s ease; }
  .plate.active{ background:#eef3ff; color:#1f3fbf; }

  @media (max-width:420px){
    .chart{ grid-template-columns:repeat(5,64px); }
  }
</style>
</head>

<body>

<!-- Thumbnails -->
<div class="thumbnail-container" onclick="openExercises('Legs/Glutes', DATA.legs)">
  <img src="https://jessicaautumn.com/wp-content/uploads/2019/06/10-Minute-Workout-For-The-Perfect-Bubble-Butt.png">
  <div class="label">Legs / Glutes</div>
</div>
<div class="thumbnail-container" onclick="openExercises('Back', DATA.back)">
  <img src="https://betterme.world/articles/wp-content/uploads/2023/04/shutterstock_1654270861.jpg">
  <div class="label">Back</div>
</div>
<div class="thumbnail-container" onclick="openExercises('Biceps', DATA.biceps)">
  <img src="https://i.pinimg.com/736x/e4/fd/2e/e4fd2e34aec8c4f86e10fceb79fe1bed.jpg">
  <div class="label">Biceps</div>
</div>
<div class="thumbnail-container" onclick="openExercises('Chest', DATA.chest)">
  <img src="https://hips.hearstapps.com/hmg-prod/images/766/articles/2017/10/benchpress-1508589156.jpg">
  <div class="label">Chest</div>
</div>
<div class="thumbnail-container" onclick="openExercises('Shoulders', DATA.shoulders)">
  <img src="https://media.istockphoto.com/id/1370070773/photo/fitness.jpg?s=612x612&w=0&k=20&c=FjKgCTJnlLUV8V0ftf0rgsjKgUPD83hWZQURViRRBmk=">
  <div class="label">Shoulders</div>
</div>
<div class="thumbnail-container" onclick="openExercises('Triceps', DATA.triceps)">
  <img src="https://t4.ftcdn.net/jpg/01/70/23/39/360_F_170233939_NAVDp5d9kTWMwthTNC3ZJiwqxrKOfdUs.jpg">
  <div class="label">Triceps</div>
</div>

<div class="controls">
  <button onclick="exportData()">Export</button>
  <input type="file" id="importFile" accept="application/json" hidden>
  <button onclick="document.getElementById('importFile').click()">Import</button>
</div>

<div class="overlay" onclick="closePanel()"></div>
<div id="panel"></div>

<script>
const DATA = {
  legs: [
    { name:'Leg curl', img:'https://www.hoistfitness.com/cdn/shop/files/RS-2408_FINISHSIDE2_resized.png' },
    { name:'Leg press', img:'https://i.ytimg.com/vi/n2ng6LCp3yk/hq720.jpg' },
    { name:'Hip Spread', img:'https://blackbearfitness.co.uk/cdn/shop/files/Untitled-design33-1_cleanup.png' },
    { name:'Hip Squeeze', img:'https://extremefitness.co.uk/wp-content/uploads/Untitled-design29.jpg' },
    { name:'Leg Extensions', img:'https://cffstrengthequipment.com/cdn/shop/products/hoist_leg_extension_rs_1401_a.1_1024x1024.jpg' },
    { name:'Booty squats', img:'https://www.shutterstock.com/image-photo/woman-training-fitness-rubber-band-260nw-2210643481.jpg' }
  ],
  back: [
    { name:'Row (triangle)', img:'https://i.ytimg.com/vi/hxdhLPCCJQI/maxresdefault.jpg' },
    { name:'Row (bar)', img:'https://i.ytimg.com/vi/9_35TQNqm7Q/hqdefault.jpg' },
    { name:'Pull down (triangle)', img:'https://dungcutheduc.vn/images/close-grip-lat-pulldown.jpg' },
    { name:'Pull down (bar)', img:'https://i.vimeocdn.com/video/867314588.webp' },
    { name:'Face pull', img:'https://i.pinimg.com/736x/f3/68/85/f3688525e50f2814a74990a1a06b4895.jpg' },
    { name:'Rear Delt Flyes', img:'https://www.buyandsellfitness.com/cdn/shop/products/Rear-Delt-Finsh_1024x1024.jpg' }
  ],
  biceps: [
    { name:'Hammer curl dumbbell', img:'https://julielohre.com/wp-content/uploads/2018/07/Bicep-Hammer-Curl.jpg' },
    { name:'Open hand curl dumbbell', img:'https://kefl.co.uk/cdn/shop/articles/best-dumbbell-exercises-for-building-muscle-148250.jpg' },
    { name:'Rope curl', img:'https://img.livestrong.com/375/cme-data/getty/d98f17ab178a4804b614028dfa95278e.jpg' },
    { name:'Drag curls', img:'https://i.ytimg.com/vi/1n_2P4OR-0Q/maxresdefault.jpg' }
  ],
  chest: [
    { name:'Machine chest press', img:'https://t4.ftcdn.net/jpg/03/00/96/39/360_F_300963984.jpg' },
    { name:'Chest flyes', img:'https://workouthealthy.com/cdn/shop/files/BS-S2PEC.webp' }
  ],
  shoulders: [
    { name:'Shoulder press', img:'https://vtasfitnesscentre.com/wp-content/uploads/2021/03/Dumbbell-Shoulder-Press.jpg' },
    { name:'Lateral raise', img:'https://images.ctfassets.net/8urtyqugdt2l/1EG31PaEzRIWNnuW9VeXcI/29ca964acdaf4d51494ca515971093f9/tile-image-how-to-do-lateral-raises.jpg' }
  ],
  triceps: [
    { name:'Rope triceps', img:'https://s3assets.skimble.com/assets/2674907/image_full.jpg' },
    { name:'Triangle tricep push down', img:'https://images.squarespace-cdn.com/tricep.jpg' },
    { name:'Dip Machine', img:'https://s3.amazonaws.com/prod.skimble/assets/1495083/image_iphone.jpg' }
  ]
};

function openExercises(group, exercises){
  document.querySelector('.overlay').style.display='block';
  const panel=document.getElementById('panel');
  panel.innerHTML='';
  exercises.forEach(ex=>{
    const card=document.createElement('div');
    card.className='exercise-card';
    card.innerHTML=`<img src="${ex.img}"><div class="exercise-title">${group} - ${ex.name}</div>`;
    ['Warm Up','1','2','3'].forEach(label=>card.appendChild(buildChart(group,ex.name,label)));
    panel.appendChild(card);
  });
}

function closePanel(){
  document.querySelector('.overlay').style.display='none';
  document.getElementById('panel').innerHTML='';
}

function safeKey(str){ return String(str).replace(/\s+/g,' ').trim(); }

function buildChart(group, ex, label){
  const key=`BSCULPT::${safeKey(group)}::${safeKey(ex)}::${safeKey(label)}`;
  const saved=JSON.parse(localStorage.getItem(key)||'{}');
  const wrapper=document.createElement('div');
  wrapper.className='chart-wrapper';
  wrapper.innerHTML=`
    <div class="chart">
      <div class="cell chart-label">${label}</div>
      <div class="cell" style="grid-column:2/span 2">
        <div class="slider-container">
          <div class="set-value">${saved.set||1}</div>
          <input type="range" min="1" max="20" value="${saved.set||1}">
        </div>
      </div>
      <div class="cell editable" contenteditable style="grid-column:4/span 2">${saved.weight||0}</div>
      ${[45,25,10,5,2.5].map(p=>`<div class="cell plate" data-w="${p}">${p} × 0</div>`).join('')}
    </div>`;
  const weight=wrapper.querySelector('.editable');
  const slider=wrapper.querySelector('input');
  const setVal=wrapper.querySelector('.set-value');
  const plates=[...wrapper.querySelectorAll('.plate')];
  function update(){
    let w=parseFloat(weight.textContent)||0, r=w;
    plates.forEach(p=>{
      const pw=+p.dataset.w;
      const c=Math.floor(r/pw); r-=c*pw;
      p.textContent=`${pw} × ${c}`;
      p.classList.toggle('active',c>0);
    });
    localStorage.setItem(key,JSON.stringify({weight:w,set:+slider.value}));
  }
  slider.oninput=()=>{setVal.textContent=slider.value;update();}
  weight.oninput=update;
  update();
  return wrapper;
}

/* -------- ORDERED EXPORT / IMPORT -------- */
const GROUP_ORDER=[
  {key:'legs',name:'Legs/Glutes'},
  {key:'back',name:'Back'},
  {key:'biceps',name:'Biceps'},
  {key:'chest',name:'Chest'},
  {key:'shoulders',name:'Shoulders'},
  {key:'triceps',name:'Triceps'}
];
const CHART_ORDER=['Warm Up','1','2','3'];

function exportData(){
  const out={meta:{app:'Babe Sculpting',version:2,exportedAt:new Date().toISOString()},groups:[]};
  GROUP_ORDER.forEach(g=>{
    const gb={group:g.name,exercises:[]};
    (DATA[g.key]||[]).forEach(ex=>{
      const eb={name:ex.name,charts:[]};
      CHART_ORDER.forEach(l=>{
        const k=`BSCULPT::${safeKey(g.name)}::${safeKey(ex.name)}::${safeKey(l)}`;
        const s=JSON.parse(localStorage.getItem(k)||'{}');
        eb.charts.push({label:l,set:s.set||1,weight:s.weight||0});
      });
      gb.exercises.push(eb);
    });
    out.groups.push(gb);
  });
  const blob=new Blob([JSON.stringify(out,null,2)],{type:'application/json'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download='babe_sculpting_data.json';
  a.click();
}

document.getElementById('importFile').onchange=e=>{
  const f=e.target.files[0]; if(!f) return;
  const r=new FileReader();
  r.onload=()=>{
    const d=JSON.parse(r.result);
    if(Array.isArray(d.groups)){
      d.groups.forEach(g=>g.exercises.forEach(ex=>ex.charts.forEach(c=>{
        const k=`BSCULPT::${safeKey(g.group)}::${safeKey(ex.name)}::${safeKey(c.label)}`;
        localStorage.setItem(k,JSON.stringify({weight:c.weight||0,set:c.set||1}));
      })));
    }else{
      Object.keys(d).forEach(k=>k.startsWith('BSCULPT::')&&localStorage.setItem(k,JSON.stringify(d[k])));
    }
    alert('Import complete.');
  };
  r.readAsText(f);
};
</script>
</body>
</html>